# Task List: Phase 1 - Foundation (Figma Scrim Plugin)

## Relevant Files

- `package.json` - Node.js project configuration with dependencies and build scripts
- `tsconfig.json` - TypeScript compiler configuration for plugin development
- `manifest.json` - Figma plugin manifest defining plugin metadata and permissions
- `webpack.config.js` - Webpack bundler configuration for building plugin code and UI
- `src/code.ts` - Main plugin code that runs in Figma's sandbox environment
- `src/ui/App.tsx` - Root React component for the plugin UI
- `src/ui/ui.html` - HTML entry point for the plugin UI iframe
- `src/ui/styles.css` - CSS styles for the plugin UI
- `src/ui/index.tsx` - React app entry point that renders App component
- `dist/` - Build output directory (generated by webpack)
- `.gitignore` - Git ignore rules (already exists)
- `README.md` - Project documentation with setup and usage instructions

### Notes

- The plugin follows Figma's architecture: `code.ts` runs in a sandboxed environment and communicates with `ui.html` via postMessage API
- Webpack will bundle TypeScript/React code into JavaScript that can run in Figma
- Development workflow: write code → build with webpack → test in Figma desktop app
- No unit tests in Phase 1 (testing will be manual in Figma)

## Instructions for Completing Tasks

**IMPORTANT:** As you complete each task, you must check it off in this markdown file by changing `- [ ]` to `- [x]`. This helps track progress and ensures you don't skip any steps.

Example:
- `- [ ] 1.1 Read file` → `- [x] 1.1 Read file` (after completing)

Update the file after completing each sub-task, not just after completing an entire parent task.

## Tasks

- [x] 0.0 Create feature branch
  - [x] 0.1 Initialize git repository if not already initialized (`git init`)
  - [x] 0.2 Create and checkout a new branch for Phase 1 foundation work (`git checkout -b feature/phase1-foundation`)

- [ ] 1.0 Initialize Node.js project and install dependencies
  - [x] 1.1 Run `npm init -y` to create package.json with default values
  - [x] 1.2 Install TypeScript and type definitions: `npm install --save-dev typescript @figma/plugin-typings @types/node`
  - [x] 1.3 Install React and ReactDOM: `npm install react react-dom`
  - [x] 1.4 Install React type definitions: `npm install --save-dev @types/react @types/react-dom`
  - [x] 1.5 Install webpack and related loaders: `npm install --save-dev webpack webpack-cli ts-loader css-loader style-loader html-webpack-plugin html-inline-script-webpack-plugin`
  - [x] 1.6 Update package.json scripts section with build commands (`"build": "webpack --mode production"`, `"watch": "webpack --mode development --watch"`)

- [x] 1.0 Initialize Node.js project and install dependencies

- [x] 2.0 Configure TypeScript for Figma plugin development
  - [x] 2.1 Create `tsconfig.json` in project root
  - [x] 2.2 Configure compiler options: target ES6, module ESNext, jsx react, strict mode enabled
  - [x] 2.3 Add type roots to include @figma/plugin-typings
  - [x] 2.4 Set outDir to "dist" and include src directory files
  - [x] 2.5 Enable sourceMap for debugging support

- [x] 2.0 Configure TypeScript for Figma plugin development

- [x] 3.0 Create Figma plugin manifest file
  - [x] 3.1 Create `manifest.json` in project root
  - [x] 3.2 Set pugin name to "Scrim & Overlay Generator"
  - [x] 3.3 Set plugin id (generate unique identifier)
  - [x] 3.4 Configure api version (use "1.0.0")
  - [x] 3.5 Set main entry point to "dist/code.js"
  - [x] 3.6 Configure UI to load from "dist/ui.html"
  - [x] 3.7 Set editorType to ["figma"] (not FigJam)
  - [x] 3.8 Add appropriate plugin permissions (current page access)

- [x] 3.0 Create Figma plugin manifest file

- [x] 4.0 Set up build tooling (bundler configuration)
  - [x] 4.1 Create `webpack.config.js` in project root
  - [x] 4.2 Configure entry points: one for plugin code (code.ts), one for UI (index.tsx)
  - [x] 4.3 Configure output settings: filename patterns, output path to dist/
  - [x] 4.4 Add ts-loader for TypeScript compilation
  - [x] 4.5 Add css-loader and style-loader for CSS processing
  - [x] 4.6 Configure HtmlWebpackPlugin to generate ui.html with inlined scripts
  - [x] 4.7 Set up separate configurations for plugin code (node target) and UI (web target)
  - [x] 4.8 Test build process by running `npm run build` (should create dist/ directory)

- [x] 4.0 Set up build tooling (bundler configuration)

- [x] 5.0 Create basic plugin code structure (sandbox code)
  - [x] 5.1 Create `src/` directory
  - [x] 5.2 Create `src/code.ts` file
  - [x] 5.3 Add Figma plugin initialization code (figma.showUI with basic configuration)
  - [x] 5.4 Set UI dimensions (width: 300px, height: 400px initially)
  - [x] 5.5 Add message handler to receive messages from UI (figma.ui.onmessage)
  - [x] 5.6 Add placeholder message handler cases (ready, create-scrim)
  - [x] 5.7 Add selection validation logic (check if layer is selected)
  - [x] 5.8 Add basic error handling and user notifications (figma.notify)

- [x] 5.0 Create basic plugin code structure (sandbox code)

- [x] 6.0 Create basic UI structure with React
  - [x] 6.1 Create `src/ui/` directory
  - [x] 6.2 Create `src/ui/App.tsx` with basic React component structure
  - [x] 6.3 Add main heading "Scrim & Overlay Generator"
  - [x] 6.4 Add placeholder sections for preset buttons (to be implemented in Phase 2)
  - [x] 6.5 Add placeholder for opacity controls (to be implemented in Phase 2)
  - [x] 6.6 Create `src/ui/index.tsx` to render App component to DOM
  - [x] 6.7 Add postMessage communication to notify plugin code when UI is ready
  - [x] 6.8 Create `src/ui/ui.html` as template for HtmlWebpackPlugin (basic HTML structure with root div)
  - [x] 6.9 Create `src/ui/styles.css` with basic plugin styling (Figma-like appearance)
  - [x] 6.10 Add CSS variables for common colors, spacing, typography
  - [x] 6.11 Style main container, headings, and layout structure

- [x] 6.0 Create basic UI structure with React

- [x] 7.0 Test plugin installation and activation in Figma
  - [x] 7.1 Run `npm run build` to compile plugin code
  - [x] 7.2 Verify dist/ directory contains code.js and ui.html
  - [x] 7.3 Open Figma desktop application
  - [x] 7.4 Go to Plugins → Development → Import plugin from manifest
  - [x] 7.5 Select manifest.json from project root
  - [x] 7.6 Verify plugin appears in Plugins menu
  - [x] 7.7 Run the plugin and verify UI panel opens
  - [x] 7.8 Verify UI displays "Scrim & Overlay Generator" heading
  - [x] 7.9 Check browser console (Plugins → Development → Open Console) for errors
  - [x] 7.10 Verify no performance issues or crashes occur
  - [x] 7.11 Document any issues found and create notes for fixes

**Note:** Tasks 7.3-7.11 require manual testing in the Figma desktop application. Complete these steps to verify the plugin works correctly.
